{% extends 'base.html' %}
{% block title %}Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª{% endblock %}

{% block content %}
<div class="container mt-5">
  <h2 class="text-center mb-4">Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ø³Ø§ÛŒØª</h2>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, msg in messages %}
        <div class="alert alert-{{ category }}">{{ msg }}</div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <!-- ğŸ”¹ Ø¯Ú©Ù…Ù‡ ÙˆÛŒØ±Ø§ÛŒØ´ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ù† -->
  <div class="text-center mt-3 mb-4">
    <a href="{{ url_for('edit_about') }}" class="btn btn-outline-info btn-lg">
      âœï¸ ÙˆÛŒØ±Ø§ÛŒØ´ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ù†
    </a>
  </div>

  <h3 class="mt-4">Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</h3>
  {% if messages %}
    <table class="table table-bordered mt-3">
      <thead>
        <tr>
          <th>Ù†Ø§Ù…</th>
          <th>Ø§ÛŒÙ…ÛŒÙ„</th>
          <th>Ù¾ÛŒØ§Ù…</th>
        </tr>
      </thead>
      <tbody>
        {% for msg in messages %}
          <tr>
            <td>{{ msg.name }}</td>
            <td>{{ msg.email }}</td>
            <td>{{ msg.message }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p class="text-muted mt-3">Ù‡Ù†ÙˆØ² Ù¾ÛŒØ§Ù…ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ ğŸ’¬</p>
  {% endif %}

  <hr class="my-5">

  <h3 class="mt-4 mb-3">Ø§ÙØ²ÙˆØ¯Ù† Ù¾Ø±ÙˆÚ˜Ù‡ Ø¬Ø¯ÛŒØ¯</h3>

  <form method="POST" enctype="multipart/form-data">
    <div class="mb-3">
      <label>Ø¹Ù†ÙˆØ§Ù† Ù¾Ø±ÙˆÚ˜Ù‡</label>
      <input type="text" name="title" class="form-control" required>
    </div>

    <div class="mb-3">
      <label>ØªÙˆØ¶ÛŒØ­ Ú©ÙˆØªØ§Ù‡</label>
      <textarea name="description" rows="3" class="form-control" required></textarea>
    </div>

    <div class="mb-3">
      <label>ØªØµÙˆÛŒØ± Ù¾Ø±ÙˆÚ˜Ù‡ (ÙØ§ÛŒÙ„)</label>
      <input type="file" name="image_file" class="form-control" accept=".png,.jpg,.jpeg,.gif">
    </div>

    <div class="mb-3">
      <label>Ù„ÛŒÙ†Ú© Ù¾Ø±ÙˆÚ˜Ù‡ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label>
      <input type="url" name="link" class="form-control">
    </div>

    <button type="submit" class="btn btn-success w-100">Ø§ÙØ²ÙˆØ¯Ù† Ù¾Ø±ÙˆÚ˜Ù‡</button>
  </form>

  <h3 class="mt-5">Ù„ÛŒØ³Øª Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</h3>
  {% if projects %}
    <table class="table table-striped mt-3">
      <thead>
        <tr>
          <th>Ø¹Ù†ÙˆØ§Ù†</th>
          <th>ØªÙˆØ¶ÛŒØ­</th>
          <th>Ù„ÛŒÙ†Ú©</th>
          <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
        </tr>
      </thead>
      <tbody>
        {% for p in projects %}
          <tr>
            <td>{{ p.title }}</td>
            <td>{{ p.description }}</td>
            <td>
              {% if p.link %}
                <a href="{{ p.link }}" target="_blank">Ù…Ø´Ø§Ù‡Ø¯Ù‡</a>
              {% else %}
                -
              {% endif %}
            </td>
            <td>
              <a href="{{ url_for('edit_project', id=p.id) }}" class="btn btn-sm btn-warning">ÙˆÛŒØ±Ø§ÛŒØ´</a>
              <form action="{{ url_for('delete_project', id=p.id) }}" method="POST" style="display:inline;">
                <button type="submit" class="btn btn-sm btn-danger">Ø­Ø°Ù</button>
              </form>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p class="text-muted mt-3">Ù‡Ù†ÙˆØ² Ù¾Ø±ÙˆÚ˜Ù‡â€ŒØ§ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ ğŸš€</p>
  {% endif %}

  <div class="text-center mt-4">
    <a href="{{ url_for('logout') }}" class="btn btn-danger">Ø®Ø±ÙˆØ¬ Ø§Ø² Ø­Ø³Ø§Ø¨</a>
  </div>
</div>
{% endblock %}
